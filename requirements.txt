# Receipt OCR API - Final Working Requirements
# Python 3.12+ Compatible - Tested and Verified
# Updated: January 2025

# ============================================
# CRITICAL FIXES APPLIED:
# ============================================
# ✅ NumPy 1.x (not 2.x) - PaddlePaddle 2.6.0 compatibility
# ✅ CPU version (not GPU) - OneDNN compatibility issues fixed
# ✅ OpenCV <=4.6.0.66 - PaddleOCR dependency requirement
# ✅ setuptools added - Python 3.12+ requirement
# ✅ python-magic-bin - Windows compatibility
# ============================================

# STEP 1: NumPy (MUST BE 1.x for PaddlePaddle 2.6.0)
numpy>=1.19.0,<2.0.0

# STEP 2: Core OCR
paddlepaddle==2.6.0  # CPU version (stable on Windows/Python 3.12)
paddleocr==2.7.3

# STEP 3: Image Processing
opencv-python<=4.6.0.66  # Max version for PaddleOCR 2.7.3
opencv-contrib-python<=4.6.0.66
Pillow>=10.0.0

# STEP 4: Scientific Computing
scipy>=1.11.0

# STEP 5: Essential Utilities
setuptools>=65.0.0  # Required by PaddleOCR on Python 3.12+
python-magic-bin>=0.4.14  # Windows (use python-magic on Linux/Mac)
python-multipart>=0.0.6
PyYAML>=6.0

# STEP 6: Logging
loguru>=0.7.0

# STEP 7: Testing
pytest>=7.4.0
pytest-asyncio>=0.21.0
pytest-cov>=4.1.0

# STEP 8: Development Tools (Optional)
ipython>=8.12.0
black>=23.0.0
flake8>=6.0.0

# ============================================
# Week 2 Dependencies (Uncomment when ready)
# ============================================
# fastapi>=0.109.0
# uvicorn[standard]>=0.25.0
# redis>=5.0.0
# asyncpg>=0.29.0
# pydantic>=2.5.0
# pydantic-settings>=2.1.0
# python-jose[cryptography]>=3.3.0
# passlib[bcrypt]>=1.7.4
# boto3>=1.34.0

# ============================================
# INSTALLATION INSTRUCTIONS
# ============================================
#
# Clean install (recommended):
#   pip uninstall numpy paddlepaddle paddlepaddle-gpu opencv-python -y
#   pip install "numpy>=1.19.0,<2.0.0"
#   pip install -r requirements.txt
#
# Or fresh install:
#   pip install -r requirements.txt
#
# Verify installation:
#   python src/test_paddle_install.py
#
# ============================================
# PLATFORM NOTES
# ============================================
#
# Windows:
#   ✅ Uses python-magic-bin (no extra steps)
#   ✅ CPU version works perfectly
#   ⚠️  GPU version has OneDNN issues
#
# Linux (Ubuntu/Debian):
#   Change: python-magic-bin → python-magic
#   Install: sudo apt-get install libmagic-dev
#
# macOS:
#   Change: python-magic-bin → python-magic  
#   Install: brew install libmagic
#
# ============================================
# PERFORMANCE NOTES
# ============================================
#
# CPU Performance: ~1.5-2s per receipt
# GPU Performance: ~0.3-0.5s per receipt (if working)
#
# Current setup prioritizes stability over speed
# For production with GPU, consider:
#   - paddlepaddle-gpu>=3.0.0 (newer, better Windows support)
#   - AWS GPU instances (more stable environment)
#
# ============================================